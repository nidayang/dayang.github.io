---
title: 服务注册中心
date: 2022-08-17 15:51:39
permalink: /pages/b1a066/
categories:
  - java
  - 微服务相关
tags:
  - 
author: 
  name: nidayang
  link: https://github.com/nidayang
---
# 服务注册与发现

## 勘误

首先，真想给自己一个大逼兜，理解错了服务注册与发现的一个关键环节。

也就是**发现**这一步到底是在中间件例如nacos上实现的，还是在客户端实现的。

### 之前的错误观念

之前一直以为是在中间件上实现的，以为请求发往nacos或者其他的服务注册与发现的中间件，然后中间件根据注册上来的服务，利用一定的负载均衡算法实现路由转发的效果。这个理念导致我有好多的疑问？

- 例如服务调用的时候，利用Ribbon进行负载均衡的时候代码是写在客户端的，也和中间件没啥关系呀
- 认为服务注册就和nginx差不多。。其实根本就不是一个东西

## 正确的理解

>  参考  [https://zhuanlan.zhihu.com/p/161277955](https://zhuanlan.zhihu.com/p/161277955)

其实服务注册与发现就是利用发布-订阅模式，也就是观察者模式。

- 服务提供者和服务调用者都将自己注册到注册与发现中心上去

- 服务调用者发送请求的时候，会从服务注册中心获取对应服务的列表，采取一定的负载均衡的策略去调用服务

关键就是，<font color='red'> **其实他们的调用还是发生在调用者和提供者俩个服务器之间**</font>，并没有经过什么中间件。

这边就会有一个疑问，当提供方发生变动的时候，是中间件通知给调用方，还是调用方通过轮询的方式去拉取列表？ 

我自己的理解，既然用了观察者模式，<font color='red'>**这个服务列表的变动当由中间件主动取推送给调用方**</font>,这边先这么理解，有错误再改。

## 框架

- Eureka (<font color='red'>停更</font>)
- Zookeeper
- Consul
- Nacos

# Zookeeper

